<script>
const ORIGINAL = ['Preme','Earn','Manie','Dou Dou','Aarav','Caolan','Freddie','Lara','Pryn','James','Jack','LeLe','Bil'];
let namelist = [...ORIGINAL];
let current = null;
let assignments = [];

function render() {
  document.getElementById("remaining").innerText = namelist.join(", ") || "No one left.";
  document.getElementById("current").innerText = current || "—";
  document.getElementById("btn-itsme").disabled = !current;
  document.getElementById("btn-assign").disabled = !current;
  const result = document.getElementById("result");
  if (assignments.length) {
    result.classList.remove("hidden");
    result.innerHTML = "<strong>Assignments:</strong><br>" + assignments.map(a => `${a[0]} → ${a[1]}`).join("<br>");
  } else {
    result.classList.add("hidden");
  }
}

function draw(exclude=null) {
  let candidates = namelist.filter(n => n !== exclude);
  if (!candidates.length) { current = null; return; }
  current = candidates[Math.floor(Math.random()*candidates.length)];
}

document.getElementById("btn-draw").onclick = () => { draw(); render(); };
document.getElementById("btn-itsme").onclick = () => { draw(current); render(); };
document.getElementById("btn-assign").onclick = () => {
  if (!current) return;
  let partnerCandidates = namelist.filter(n => n !== current);
  let partner = partnerCandidates[Math.floor(Math.random()*partnerCandidates.length)];
  assignments.push([current, partner]);
  namelist = namelist.filter(n => n !== partner);
  current = null;
  render();
};
document.getElementById("btn-reset").onclick = () => { namelist = [...ORIGINAL]; current=null; assignments=[]; render(); };

render();
</script>
